# ç·¨è­¯æª¢æŸ¥å ±å‘Š

## ğŸ”§ å°ˆæ¡ˆçµæ§‹æ›´æ–°å®Œæˆ

### âœ… å·²å®Œæˆçš„ä¿®æ­£ï¼š

1. **UI æª”æ¡ˆé‡æ–°çµ„ç¹”**ï¼š
   - æ‰€æœ‰ UI æª”æ¡ˆå·²ç§»å‹•åˆ° `main/ui/` ç›®éŒ„
   - åŒ…å«å®Œæ•´çš„ SquareLine Studio å°å‡ºæª”æ¡ˆ
   - çµ„ä»¶æª”æ¡ˆï¼š`ui_comp.c`, `ui_comp.h`, `ui_comp_*.c/h`
   - ç•«é¢æª”æ¡ˆï¼š`ui_Home.c`, `ui_Step1.c`, `ui_Step2.c`, ç­‰
   - åœ–ç‰‡æª”æ¡ˆï¼šæ‰€æœ‰ `ui_img_*.c` æª”æ¡ˆ
   - å­—é«”æª”æ¡ˆï¼šåœ¨ `ui/fonts/` ç›®éŒ„ä¸­

2. **ä¸»ç¨‹å¼æ›´æ–°**ï¼š
   - `main/main.c` å·²æ›´æ–°åŒ…å«å®Œæ•´çš„ LVGL åˆå§‹åŒ–
   - åŒ…å«é¡¯ç¤ºé©…å‹•å’Œè§¸æ§é©…å‹•åˆå§‹åŒ–
   - åŒ…å« UI åˆå§‹åŒ–å’Œ LVGL ä»»å‹™

3. **CMakeLists.txt æ›´æ–°**ï¼š
   - `main/CMakeLists.txt` å·²æ›´æ–°åŒ…å«æ‰€æœ‰ UI æª”æ¡ˆ
   - æ­£ç¢ºçš„ include ç›®éŒ„è¨­å®š
   - å¿…è¦çš„çµ„ä»¶ä¾è³´é …

4. **æ¸…ç†èˆŠæª”æ¡ˆ**ï¼š
   - ç§»é™¤æ ¹ç›®éŒ„ä¸­é‡è¤‡çš„ UI æª”æ¡ˆ
   - ç§»é™¤èˆŠçš„ `components/ui_components` ç›®éŒ„
   - æ¸…ç† PlatformIO éºç•™æª”æ¡ˆ

### ğŸ“ ç•¶å‰å°ˆæ¡ˆçµæ§‹ï¼š

```
PK200_LCD_ESP-IDF/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ main.c                    # ä¸»ç¨‹å¼ (å·²æ›´æ–°)
â”‚   â”œâ”€â”€ CMakeLists.txt           # ä¸»çµ„ä»¶é…ç½® (å·²æ›´æ–°)
â”‚   â””â”€â”€ ui/                      # UI æª”æ¡ˆç›®éŒ„
â”‚       â”œâ”€â”€ ui.c, ui.h           # ä¸»è¦ UI æª”æ¡ˆ
â”‚       â”œâ”€â”€ ui_helpers.c, ui_helpers.h
â”‚       â”œâ”€â”€ ui_events.h
â”‚       â”œâ”€â”€ components/          # UI çµ„ä»¶
â”‚       â”‚   â”œâ”€â”€ ui_comp.c, ui_comp.h
â”‚       â”‚   â”œâ”€â”€ ui_comp_button.c, ui_comp_button.h
â”‚       â”‚   â”œâ”€â”€ ui_comp_card.c, ui_comp_card.h
â”‚       â”‚   â”œâ”€â”€ ui_comp_cardbg.c, ui_comp_cardbg.h
â”‚       â”‚   â”œâ”€â”€ ui_comp_percent.c, ui_comp_percent.h
â”‚       â”‚   â””â”€â”€ ui_comp_hook.c, ui_comp_hook.h
â”‚       â”œâ”€â”€ screens/             # UI ç•«é¢
â”‚       â”‚   â”œâ”€â”€ ui_Home.c, ui_Home.h
â”‚       â”‚   â”œâ”€â”€ ui_Step1.c, ui_Step1.h
â”‚       â”‚   â”œâ”€â”€ ui_Step2.c, ui_Step2.h
â”‚       â”‚   â”œâ”€â”€ ui_Connect.c, ui_Connect.h
â”‚       â”‚   â”œâ”€â”€ ui_Welcome.c, ui_Welcome.h
â”‚       â”‚   â”œâ”€â”€ ui_Charging.c, ui_Charging.h
â”‚       â”‚   â””â”€â”€ ui_End.c, ui_End.h
â”‚       â”œâ”€â”€ images/              # UI åœ–ç‰‡
â”‚       â”‚   â””â”€â”€ ui_img_*.c       # 19å€‹åœ–ç‰‡æª”æ¡ˆ
â”‚       â””â”€â”€ fonts/               # UI å­—é«”
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ lvgl/                    # LVGL çµ„ä»¶
â”‚   â”œâ”€â”€ display_driver/          # é¡¯ç¤ºé©…å‹•
â”‚   â””â”€â”€ touch_driver/            # è§¸æ§é©…å‹•
â”œâ”€â”€ libraries/
â”‚   â””â”€â”€ lvgl-release-v8.4/       # LVGL åº«
â””â”€â”€ é…ç½®æª”æ¡ˆ...
```

### ğŸ¯ åŠŸèƒ½ç‰¹æ€§ï¼š

- âœ… **7å€‹å®Œæ•´çš„ UI ç•«é¢**ï¼šHome, Step1, Step2, Connect, Welcome, Charging, End
- âœ… **19å€‹åœ–ç‰‡è³‡æº**ï¼šèƒŒæ™¯ã€åœ–æ¨™ã€æ»‘å¡Šç­‰
- âœ… **å®Œæ•´çš„ UI çµ„ä»¶**ï¼šæŒ‰éˆ•ã€å¡ç‰‡ã€ç™¾åˆ†æ¯”é¡¯ç¤ºç­‰
- âœ… **LVGL v8.4 æ”¯æ´**ï¼šå®Œæ•´çš„åœ–å½¢ç•Œé¢åº«
- âœ… **ESP32 å„ªåŒ–**ï¼šè¨˜æ†¶é«”ç®¡ç†å’Œ PSRAM æ”¯æ´
- âœ… **è§¸æ§æ”¯æ´**ï¼šFT6336U è§¸æ§é©…å‹•
- âœ… **é¡¯ç¤ºæ”¯æ´**ï¼šST7796 é¡¯ç¤ºé©…å‹•

### ğŸ” VS Code ç·¨è­¯æª¢æŸ¥ï¼š

**ä½¿ç”¨ VS Code ESP-IDF æ“´å±•é€²è¡Œç·¨è­¯ï¼š**

1. é–‹å•Ÿ VS Code
2. ç¢ºä¿ ESP-IDF æ“´å±•å·²å®‰è£ä¸¦é…ç½®
3. ä½¿ç”¨ `Ctrl+Shift+P` é–‹å•Ÿå‘½ä»¤é¢æ¿
4. åŸ·è¡Œ "ESP-IDF: Set Espressif device target" â†’ é¸æ“‡ ESP32
5. åŸ·è¡Œ "ESP-IDF: Build your project"

**é æœŸçµæœï¼š**
- æ‰€æœ‰ UI æª”æ¡ˆæ‡‰è©²æ­£ç¢ºç·¨è­¯
- æ²’æœ‰ç¼ºå¤±çš„æ¨™é ­æª”æ¡ˆéŒ¯èª¤
- æ²’æœ‰æœªå®šç¾©çš„å‡½æ•¸éŒ¯èª¤
- æˆåŠŸç”Ÿæˆ firmware.bin

### âš ï¸ æ³¨æ„äº‹é …ï¼š

1. **ESP-IDF ç’°å¢ƒ**ï¼šç¢ºä¿ ESP-IDF v5.4.2 æ­£ç¢ºå®‰è£
2. **VS Code é…ç½®**ï¼šç¢ºä¿ `.vscode/settings.json` æ­£ç¢ºé…ç½®
3. **ä¾è³´é …**ï¼šç¢ºä¿æ‰€æœ‰çµ„ä»¶ï¼ˆlvgl, display_driver, touch_driverï¼‰å­˜åœ¨
4. **è¨˜æ†¶é«”é…ç½®**ï¼šå°ˆæ¡ˆé…ç½®ç‚ºä½¿ç”¨ PSRAM

### ğŸš€ ä¸‹ä¸€æ­¥ï¼š

1. ä½¿ç”¨ VS Code ESP-IDF æ“´å±•ç·¨è­¯å°ˆæ¡ˆ
2. æª¢æŸ¥ç·¨è­¯è¼¸å‡ºä¸­çš„ä»»ä½•è­¦å‘Šæˆ–éŒ¯èª¤
3. å¦‚æœç·¨è­¯æˆåŠŸï¼Œå¯ä»¥é€²è¡Œç‡’éŒ„æ¸¬è©¦
4. æ¸¬è©¦ UI åŠŸèƒ½å’Œè§¸æ§éŸ¿æ‡‰

å°ˆæ¡ˆç¾åœ¨å·²ç¶“æ˜¯ä¸€å€‹å®Œæ•´çš„ã€çµæ§‹åŒ–çš„ ESP-IDF å°ˆæ¡ˆï¼ŒåŒ…å«å®Œæ•´çš„å……é›»æ¨ç”¨æˆ¶ç•Œé¢ï¼
